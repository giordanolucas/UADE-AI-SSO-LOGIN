function lscacheFactory(){var e,t,n="lscache-",r="-cacheexpiration",o=10,a=6e4,i=O(a),c="",u=!1;function l(){var t="__lscachetest__";if(void 0!==e)return e;try{if(!localStorage)return!1}catch(e){return!1}try{p(t,"__lscachetest__"),E(t),e=!0}catch(t){e=!(!s(t)||!localStorage.length)}return e}function s(e){return e&&("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function f(){return void 0===t&&(t=null!=window.JSON),t}function h(e){return e+r}function d(){return Math.floor((new Date).getTime()/a)}function g(e){return localStorage.getItem(n+c+e)}function p(e,t){localStorage.removeItem(n+c+e),localStorage.setItem(n+c+e,t)}function E(e){localStorage.removeItem(n+c+e)}function S(e){for(var t=new RegExp("^"+n+c.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)"),o=localStorage.length-1;o>=0;--o){var a=localStorage.key(o);(a=(a=a&&a.match(t))&&a[1])&&a.indexOf(r)<0&&e(a,h(a))}}function _(e){var t=h(e);E(e),E(t)}function v(e){var t=h(e),n=g(t);if(n){var r=parseInt(n,o);if(d()>=r)return E(e),E(t),!0}}function w(e,t){u&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),t&&window.console.warn("lscache - The error was: "+t.message))}function O(e){return Math.floor(864e13/e)}return{set:function(e,t,n){if(!l())return!1;if(!f())return!1;try{t=JSON.stringify(t)}catch(e){return!1}try{p(e,t)}catch(n){if(!s(n))return w("Could not add item with key '"+e+"'",n),!1;var r,a=[];S(function(e,t){var n=g(t);n=n?parseInt(n,o):i,a.push({key:e,size:(g(e)||"").length,expiration:n})}),a.sort(function(e,t){return t.expiration-e.expiration});for(var c=(t||"").length;a.length&&c>0;)r=a.pop(),w("Cache is full, removing item with key '"+e+"'"),_(r.key),c-=r.size;try{p(e,t)}catch(t){return w("Could not add item with key '"+e+"', perhaps it's too big?",t),!1}}return n?p(h(e),(d()+n).toString(o)):E(h(e)),!0},get:function(e){if(!l())return null;if(v(e))return null;var t=g(e);if(!t||!f())return t;try{return JSON.parse(t)}catch(e){return t}},remove:function(e){l()&&_(e)},supported:function(){return l()},flush:function(){l()&&S(function(e){_(e)})},flushExpired:function(){l()&&S(function(e){v(e)})},setBucket:function(e){c=e},resetBucket:function(){c=""},getExpiryMilliseconds:function(){return a},setExpiryMilliseconds:function(e){i=O(a=e)},enableWarnings:function(e){u=e}}}var lscache=lscacheFactory(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(e){this.message=e}function atob(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,a=0,i="";r=t.charAt(a++);~r&&(n=o%4?64*n+r:r,o++%4)?i+=String.fromCharCode(255&n>>(-2*o&6)):0)r=chars.indexOf(r);return i}function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function base64_url_decode(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return b64DecodeUnicode(t)}catch(e){return atob(t)}}function InvalidTokenError(e){this.message=e}function jwtDecode(e,t){if("string"!=typeof e)throw new InvalidTokenError("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(base64_url_decode(e.split(".")[n]))}catch(e){throw new InvalidTokenError("Invalid token specified: "+e.message)}}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError",InvalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";const BASE_SSO_URL="https://uade-sso-login.herokuapp.com",LOCALSTORAGE_USER_KEY="sso_user",LOCALSTORAGE_TOKEN_KEY="sso_token";function _getLoginUrl(e,t){return BASE_SSO_URL+"/login?tenant="+e+"&redirect="+t}function _getLogoutUrl(e,t){return BASE_SSO_URL+"/logout?tenant="+e+"&redirect="+t}function _saveUserToken(e){let t=jwtDecode(e),n=0;t.exp&&(n=new Date(1e3*t.exp));let r=0;n>0&&(r=n-new Date),lscache.set(LOCALSTORAGE_USER_KEY,t,r),lscache.set(LOCALSTORAGE_TOKEN_KEY,e,r)}function SSOAuth(e){this.info=e}SSOAuth.prototype.login=function(){window.location.replace(_getLoginUrl(this.info.tenantId,this.info.loginCallback))},SSOAuth.prototype.saveUserToken=function(){_saveUserToken(window.location.hash.substring(1))},SSOAuth.prototype.getEncodedToken=function(){return lscache.get(LOCALSTORAGE_TOKEN_KEY)},SSOAuth.prototype.getTokenData=function(){return lscache.get(LOCALSTORAGE_USER_KEY)},SSOAuth.prototype.logout=function(){window.location.replace(_getLogoutUrl(this.info.tenantId,this.info.logoutCallback))};