function lscacheFactory(){var e,t,r="lscache-",n="-cacheexpiration",o=10,a=6e4,c=w(a),i="",u=!1;function l(){var t="__lscachetest__";if(void 0!==e)return e;try{if(!localStorage)return!1}catch(e){return!1}try{p(t,"__lscachetest__"),E(t),e=!0}catch(t){e=!(!s(t)||!localStorage.length)}return e}function s(e){return e&&("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function f(){return void 0===t&&(t=null!=window.JSON),t}function h(e){return e+n}function d(){return Math.floor((new Date).getTime()/a)}function g(e){return localStorage.getItem(r+i+e)}function p(e,t){localStorage.removeItem(r+i+e),localStorage.setItem(r+i+e,t)}function E(e){localStorage.removeItem(r+i+e)}function S(e){for(var t=new RegExp("^"+r+i.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)"),o=localStorage.length-1;o>=0;--o){var a=localStorage.key(o);(a=(a=a&&a.match(t))&&a[1])&&a.indexOf(n)<0&&e(a,h(a))}}function _(e){var t=h(e);E(e),E(t)}function v(e){var t=h(e),r=g(t);if(r){var n=parseInt(r,o);if(d()>=n)return E(e),E(t),!0}}function O(e,t){u&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),t&&window.console.warn("lscache - The error was: "+t.message))}function w(e){return Math.floor(864e13/e)}return{set:function(e,t,r){if(!l())return!1;if(!f())return!1;try{t=JSON.stringify(t)}catch(e){return!1}try{p(e,t)}catch(r){if(!s(r))return O("Could not add item with key '"+e+"'",r),!1;var n,a=[];S(function(e,t){var r=g(t);r=r?parseInt(r,o):c,a.push({key:e,size:(g(e)||"").length,expiration:r})}),a.sort(function(e,t){return t.expiration-e.expiration});for(var i=(t||"").length;a.length&&i>0;)n=a.pop(),O("Cache is full, removing item with key '"+e+"'"),_(n.key),i-=n.size;try{p(e,t)}catch(t){return O("Could not add item with key '"+e+"', perhaps it's too big?",t),!1}}return r?p(h(e),(d()+r).toString(o)):E(h(e)),!0},get:function(e){if(!l())return null;if(v(e))return null;var t=g(e);if(!t||!f())return t;try{return JSON.parse(t)}catch(e){return t}},remove:function(e){l()&&_(e)},supported:function(){return l()},flush:function(){l()&&S(function(e){_(e)})},flushExpired:function(){l()&&S(function(e){v(e)})},setBucket:function(e){i=e},resetBucket:function(){i=""},getExpiryMilliseconds:function(){return a},setExpiryMilliseconds:function(e){c=w(a=e)},enableWarnings:function(e){u=e}}}var lscache=lscacheFactory(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(e){this.message=e}function atob(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new InvalidCharacterError("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,a=0,c="";n=t.charAt(a++);~n&&(r=o%4?64*r+n:n,o++%4)?c+=String.fromCharCode(255&r>>(-2*o&6)):0)n=chars.indexOf(n);return c}function b64DecodeUnicode(e){return decodeURIComponent(atob(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function base64_url_decode(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return b64DecodeUnicode(t)}catch(e){return atob(t)}}function InvalidTokenError(e){this.message=e}function jwtDecode(e,t){if("string"!=typeof e)throw new InvalidTokenError("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(base64_url_decode(e.split(".")[r]))}catch(e){throw new InvalidTokenError("Invalid token specified: "+e.message)}}InvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError",InvalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";const BASE_SSO_URL="https://uade-sso-login.herokuapp.com",LOCALSTORAGE_USER_KEY="sso_user",LOCALSTORAGE_TOKEN_KEY="sso_token";function _getLoginUrl(e,t){return BASE_SSO_URL+"/login?tenant="+e+"&redirect="+t}function _getLogoutUrl(e,t){return BASE_SSO_URL+"/logout?tenant="+e+"&redirect="+t}function _saveUserToken(e){let t=jwtDecode(e),r=0;t.exp&&(r=new Date(1e3*t.exp));let n=0;r>0&&(n=r-new Date),lscache.set(LOCALSTORAGE_USER_KEY,t,n),lscache.set(LOCALSTORAGE_TOKEN_KEY,e,n)}function SSOAuth(e){this.info=e}SSOAuth.prototype.login=function(){window.location.replace(_getLoginUrl(this.info.tenantId,this.info.loginCallback))},SSOAuth.prototype.saveUserToken=function(){_saveUserToken(window.location.hash.substring(1))},SSOAuth.prototype.getJWT=function(){return lscache.get(LOCALSTORAGE_TOKEN_KEY)},SSOAuth.prototype.getJWTData=function(){return lscache.get(LOCALSTORAGE_USER_KEY)},SSOAuth.prototype.getUserId=function(){return this.getJWTData().sub},SSOAuth.prototype.logout=function(){lscache.remove(LOCALSTORAGE_USER_KEY),lscache.remove(LOCALSTORAGE_TOKEN_KEY),window.location.replace(_getLogoutUrl(this.info.tenantId,this.info.logoutCallback))};